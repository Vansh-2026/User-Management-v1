var e;!function(e){e.BLAZOR="BLAZOR",e.DPL="DPL",e.JM="JM",e.KENDOUIANGULAR="KENDOUIANGULAR",e.KENDOUICOMPLETE="KENDOUICOMPLETE",e.KENDOUIMVC="KENDOUIMVC",e.KENDOUIREACT="KENDOUIREACT",e.KENDOUIVUE="KENDOUIVUE",e.MAUI="MAUI",e.RCAJAX="RCAJAX",e.RCWF="RCWF",e.RCWPF="RCWPF",e.REPORTING="REPORTING",e.REPORTSERVER="REPORTSERVER",e.UIASPCORE="UIASPCORE",e.UIXAM="UIXAM",e.WINUI="WINUI"}(e||(e={})),Object.freeze({[e.BLAZOR]:"Telerik UI for Blazor",[e.DPL]:"Telerik Document Processing",[e.JM]:"Telerik JustMock",[e.KENDOUIANGULAR]:"Kendo UI for Angular",[e.KENDOUICOMPLETE]:"Kendo UI for jQuery",[e.KENDOUIMVC]:"Telerik UI for ASP.NET MVC",[e.KENDOUIREACT]:"KendoReact",[e.KENDOUIVUE]:"Kendo UI for Vue",[e.MAUI]:"Telerik UI for .NET MAUI",[e.RCAJAX]:"Telerik UI for ASP.NET AJAX",[e.RCWF]:"Telerik UI for WinForms",[e.RCWPF]:"Telerik UI for WPF",[e.REPORTING]:"Telerik Reporting",[e.REPORTSERVER]:"Telerik Report Server",[e.UIASPCORE]:"Telerik UI for ASP.NET Core",[e.UIXAM]:"Telerik UI for Xamarin",[e.WINUI]:"Telerik UI for WinUI"});function t(e){return Math.floor(e.getTime()/1e3)}function n(e,n){const r=new Date(1e3*e);return r.setDate(r.getDate()+n),t(r)}function r(){return t(new Date)}function i(e){const t=function(e){if("function"==typeof atob)return atob(e);if("function"==typeof Buffer)return Buffer.from(e,"base64").toString("utf8");throw new Error("atob is undefined")}(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}function o(e){return i(e.replace(/-/g,"+").replace(/_/g,"/"))}function s(e){return new Date(1e3*e)}function c(e,t){const n=s(t);return e>new Date(n.getFullYear(),n.getMonth(),n.getDate()+1).getTime()/1e3}function a(e,t){let i=[];return e.licenses?.length>0?i=e.licenses.map(e=>function(e){const t=e.split(".")[1],n=String.fromCharCode(...o(t));return JSON.parse(n)}(e)):e.products?.length>0&&(i=e.products.map(t=>({type:t.trial?"trial":"perpetual",code:t.code,expiration:t.licenseExpirationDate,licenseId:null,userId:e.userId}))),function(e,t){const i=t.filter(e=>"usage"!==e.type).filter(t=>e.productCode===t.code||e.redistributedBy?.includes(t.code)||e.productCodes?.includes(t.code)).sort((e,t)=>t.expiration-e.expiration);return i.find(e=>"subscription"===e.type&&!c(r(),e.expiration))||i.find(t=>"perpetual"===t.type&&!c(e.publishDate,t.expiration))||i.find(e=>"subscription"===e.type&&!c(n(r(),10),e.expiration))||i.find(e=>"trial"===e.type&&!c(r(),e.expiration))||i.find(e=>"subscription"===e.type)||i.find(e=>"perpetual"===e.type)||i.find(e=>"trial"===e.type)}(t,i)}class l{constructor(e,t,n){this.productName=e,this.severity="WARN",this.code="TKL201",this.message="No Telerik and Kendo UI License found.\n  To download a license key file, visit https://prgress.co/3PwQMKZ",this.notificationMessage=`License key missing for ${e} v${t}.  A license key is required for both paid and trial usage. Learn <a href="${n}">how to set up a license key</a>.`}}class u{constructor(e,t,n){this.productName=e,this.severity="WARN",this.code="TKL202",this.message=`${e} is not listed in your current license file.\n  Learn more about ${e} licensing at ${n}`,this.notificationMessage=`No license found for ${e} v${t}.  Access to the latest updates and support requires a <a href="${n}">valid license</a>.`}}class p{constructor(e,t,n){this.productName=e,this.severity="WARN",this.code="TKL203",this.message=`Your trial has expired ${n} day(s) ago.\n  Thank you for trying out ${e}, we hope you enjoyed your trial period.\n  To continue using our product, consider upgrading to a commercial license: https://prgress.co/3C9mr1M`,this.notificationMessage=`Your trial license for ${e} v${t} has expired ${n} ago. To continue using our product, consider upgrading to a commercial license. Learn more about <a href="https://prgress.co/3PwQMdX">${e} licensing</a>.`}}class d{constructor(e,t,n,r,i){this.productName=e,this.severity="WARN",this.code="TKL204";const o=n?` version ${n}`:"";this.message=`Your current license has expired on ${t.toLocaleDateString()} and is not valid for ${e}${o}. The product was published on ${r.toLocaleDateString()}.\n  Renew your license at https://prgress.co/3Px9m5F`,this.notificationMessage=`Your license is not valid for ${e} v${n}. To continue using the product, install a <a href="${i}">valid license</a>. Renew <a href="https://prgress.co/3PwQNi1">your license</a> and download a new license key.`}}class f{constructor(e,t){this.productName=e,this.severity="INFO",this.message=`Your Trial license will expire in ${-t} day(s).\n  To acquire a commercial license, visit https://prgress.co/3PyHIoH`}}async function h(e,t){if("object"!=typeof crypto||"object"!=typeof crypto.subtle||"function"!=typeof TextEncoder||"function"!=typeof TextDecoder)return;const n=crypto.subtle,[r,s,c]=e.split("."),a=o(c),l=new TextEncoder,u=new TextDecoder,p=l.encode(`${r}.${s}`),d=u.decode(o(r));if(!("Telerik License Evidence"===JSON.parse(d).typ))throw new Error("Unknown license evidence type");const f=await function(e){const t=i(e.replace("-----BEGIN PUBLIC KEY-----","").replace("-----END PUBLIC KEY-----","").replace(/\n/gm,""));return crypto.subtle.importKey("spki",t,{name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"},!0,["verify"])}(t);if(!await n.verify(f.algorithm,f,a,p))throw new Error("Invalid license evidence")}const g={data:"  {}  "},I=new Map,y=new Set;function m(e){try{const t=JSON.parse(function(e){const t=[],n=e.trim();for(let e=0;e<n.length;e+=2){const r=n.slice(e,e+2);t.push(Number.parseInt(r,21))}let r=66;return t.map(e=>{const t=e^r;return r=e,t}).map(e=>String.fromCharCode(e)).join("")}(e));Array.isArray(t[3])&&t.splice(3,0,"");const n={products:t[1].map(([e,t,n])=>({code:e,licenseExpirationDate:t,trial:Boolean(n)})),userId:t[2],integrity:t[3],licenses:t[4],scriptKey:!0};try{const e=JSON.parse(g.data);n.products=[...e.products,...n.products],n.licenses=[...e.licenses,...n.licenses]}catch(e){}g.data=JSON.stringify(n)}catch(e){}}let U=!0;function E(e){const i=JSON.parse(g.data),o=!i.scriptKey&&!i.timestamp,y=i.scriptKey&&"undefined"==typeof KendoLicensing;let m,E,N=!1;if(o||y||!(e=>(e.licenses?.length>0&&Promise.all(e.licenses?.map(e=>h(e,"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2mnUVMmkth2x+N/ODszG\nOFIYBL6NOO1XWRj1wkmecKuLziJDhFz0WQmyOjY34Ymg9pLuBA9QSWrrZuvPw40N\nm0X/GBmttFmPNvca3WmJ2oKM7PpLiUU9f7Ov5WeIXnx++ts/LC/OB7FtZ+LiRgJ7\n0mZnPeTogdFrASf0zSQJv4jmX840LPa6nomWeUgIVGPLLVI14Gib8Dl+nOckqCNc\nkAUUk4IBF67DufRt9zQyRxg99ysakvHX2SDbdGvIBdxWxvhhmrBoeix0uSVtG2gm\njdvSqlPJVdvMbk1Xe2+SUldJPrxH1VrTYeRUt4yqWxy16nFJUDj9exZ202X4THkU\nJQIDAQAB\n-----END PUBLIC KEY-----"))).then(()=>{U=!0}).catch(()=>{U=!1,I.clear()}),U))(i))m=new l(e.productName,e.version,e.licensingDocsUrl);else if(E=a(i,e),E){if("trial"===E.type){const n=function(e){const n=r()-t(e);return Math.floor(n/86400)}(s(E.expiration));c(r(),E.expiration)?m=new p(e.productName,e.version,n):(m=new f(e.productName,n),N=!0)}else if("perpetual"===E.type||"subscription"===E.type){let t=E.expiration;"subscription"===E.type&&(t=n(t,10)),c(e.publishDate,t)?m=new d(e.productName,s(E.expiration),e.version,s(e.publishDate),e.licensingDocsUrl):N=!0}}else m=new u(e.productName,e.version,e.licensingDocsUrl);const A=E,R=A?.expiration?s(A.expiration):void 0;return{isLicenseValid:N,licenseType:E?.type,licenseProductCode:A?.code,expiration:R,message:m}}function N(e){if(I.has(e.name))return I.get(e.name);const{isLicenseValid:t,message:n}=E(e),r=(e=>e.productCode||e.productCodes[0])(e);return n&&!y.has(r)&&(!function(e,t){if("object"==typeof console){const r=`[${e.severity}][Telerik and Kendo UI Licensing]`+(n?` ${n}:`:"")+` ${t.productName}`,i="function"==typeof console.group;i?console.group(r):console.warn(r),console.warn(e.message),i&&console.groupEnd()}var n}(n,e),y.add(r)),I.set(e.name,t),t}export{E as getLicenseStatus,m as setScriptKey,N as validatePackage};
