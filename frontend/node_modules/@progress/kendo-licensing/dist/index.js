!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).KendoLicensing={})}(this,function(e){"use strict";var t;!function(e){e.BLAZOR="BLAZOR",e.DPL="DPL",e.JM="JM",e.KENDOUIANGULAR="KENDOUIANGULAR",e.KENDOUICOMPLETE="KENDOUICOMPLETE",e.KENDOUIMVC="KENDOUIMVC",e.KENDOUIREACT="KENDOUIREACT",e.KENDOUIVUE="KENDOUIVUE",e.MAUI="MAUI",e.RCAJAX="RCAJAX",e.RCWF="RCWF",e.RCWPF="RCWPF",e.REPORTING="REPORTING",e.REPORTSERVER="REPORTSERVER",e.UIASPCORE="UIASPCORE",e.UIXAM="UIXAM",e.WINUI="WINUI"}(t||(t={})),Object.freeze({[t.BLAZOR]:"Telerik UI for Blazor",[t.DPL]:"Telerik Document Processing",[t.JM]:"Telerik JustMock",[t.KENDOUIANGULAR]:"Kendo UI for Angular",[t.KENDOUICOMPLETE]:"Kendo UI for jQuery",[t.KENDOUIMVC]:"Telerik UI for ASP.NET MVC",[t.KENDOUIREACT]:"KendoReact",[t.KENDOUIVUE]:"Kendo UI for Vue",[t.MAUI]:"Telerik UI for .NET MAUI",[t.RCAJAX]:"Telerik UI for ASP.NET AJAX",[t.RCWF]:"Telerik UI for WinForms",[t.RCWPF]:"Telerik UI for WPF",[t.REPORTING]:"Telerik Reporting",[t.REPORTSERVER]:"Telerik Report Server",[t.UIASPCORE]:"Telerik UI for ASP.NET Core",[t.UIXAM]:"Telerik UI for Xamarin",[t.WINUI]:"Telerik UI for WinUI"});function n(e){return Math.floor(e.getTime()/1e3)}function i(e,t){const i=new Date(1e3*e);return i.setDate(i.getDate()+t),n(i)}function r(){return n(new Date)}function o(e){const t=function(e){if("function"==typeof atob)return atob(e);if("function"==typeof Buffer)return Buffer.from(e,"base64").toString("utf8");throw new Error("atob is undefined")}(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}function s(e){return o(e.replace(/-/g,"+").replace(/_/g,"/"))}function c(e){return new Date(1e3*e)}function a(e,t){const n=c(t);return e>new Date(n.getFullYear(),n.getMonth(),n.getDate()+1).getTime()/1e3}function u(e,t){let n=[];return e.licenses?.length>0?n=e.licenses.map(e=>function(e){const t=e.split(".")[1],n=String.fromCharCode(...s(t));return JSON.parse(n)}(e)):e.products?.length>0&&(n=e.products.map(t=>({type:t.trial?"trial":"perpetual",code:t.code,expiration:t.licenseExpirationDate,licenseId:null,userId:e.userId}))),function(e,t){const n=t.filter(e=>"usage"!==e.type).filter(t=>e.productCode===t.code||e.redistributedBy?.includes(t.code)||e.productCodes?.includes(t.code)).sort((e,t)=>t.expiration-e.expiration);return n.find(e=>"subscription"===e.type&&!a(r(),e.expiration))||n.find(t=>"perpetual"===t.type&&!a(e.publishDate,t.expiration))||n.find(e=>"subscription"===e.type&&!a(i(r(),10),e.expiration))||n.find(e=>"trial"===e.type&&!a(r(),e.expiration))||n.find(e=>"subscription"===e.type)||n.find(e=>"perpetual"===e.type)||n.find(e=>"trial"===e.type)}(t,n)}class l{constructor(e,t,n){this.productName=e,this.severity="WARN",this.code="TKL201",this.message="No Telerik and Kendo UI License found.\n  To download a license key file, visit https://prgress.co/3PwQMKZ",this.notificationMessage=`License key missing for ${e} v${t}.  A license key is required for both paid and trial usage. Learn <a href="${n}">how to set up a license key</a>.`}}class p{constructor(e,t,n){this.productName=e,this.severity="WARN",this.code="TKL202",this.message=`${e} is not listed in your current license file.\n  Learn more about ${e} licensing at ${n}`,this.notificationMessage=`No license found for ${e} v${t}.  Access to the latest updates and support requires a <a href="${n}">valid license</a>.`}}class d{constructor(e,t,n){this.productName=e,this.severity="WARN",this.code="TKL203",this.message=`Your trial has expired ${n} day(s) ago.\n  Thank you for trying out ${e}, we hope you enjoyed your trial period.\n  To continue using our product, consider upgrading to a commercial license: https://prgress.co/3C9mr1M`,this.notificationMessage=`Your trial license for ${e} v${t} has expired ${n} ago. To continue using our product, consider upgrading to a commercial license. Learn more about <a href="https://prgress.co/3PwQMdX">${e} licensing</a>.`}}class f{constructor(e,t,n,i,r){this.productName=e,this.severity="WARN",this.code="TKL204";const o=n?` version ${n}`:"";this.message=`Your current license has expired on ${t.toLocaleDateString()} and is not valid for ${e}${o}. The product was published on ${i.toLocaleDateString()}.\n  Renew your license at https://prgress.co/3Px9m5F`,this.notificationMessage=`Your license is not valid for ${e} v${n}. To continue using the product, install a <a href="${r}">valid license</a>. Renew <a href="https://prgress.co/3PwQNi1">your license</a> and download a new license key.`}}class g{constructor(e,t){this.productName=e,this.severity="INFO",this.message=`Your Trial license will expire in ${-t} day(s).\n  To acquire a commercial license, visit https://prgress.co/3PyHIoH`}}async function h(e,t){if("object"!=typeof crypto||"object"!=typeof crypto.subtle||"function"!=typeof TextEncoder||"function"!=typeof TextDecoder)return;const n=crypto.subtle,[i,r,c]=e.split("."),a=s(c),u=new TextEncoder,l=new TextDecoder,p=u.encode(`${i}.${r}`),d=l.decode(s(i));if(!("Telerik License Evidence"===JSON.parse(d).typ))throw new Error("Unknown license evidence type");const f=await function(e){const t=o(e.replace("-----BEGIN PUBLIC KEY-----","").replace("-----END PUBLIC KEY-----","").replace(/\n/gm,""));return crypto.subtle.importKey("spki",t,{name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"},!0,["verify"])}(t);if(!await n.verify(f.algorithm,f,a,p))throw new Error("Invalid license evidence")}const y={data:"  {}  "},I=new Map,m=new Set;let U=!0;function E(e){const t=JSON.parse(y.data),o=!t.scriptKey&&!t.timestamp,s=t.scriptKey&&"undefined"==typeof KendoLicensing;let m,E,N=!1;if(o||s||!(e=>(e.licenses?.length>0&&Promise.all(e.licenses?.map(e=>h(e,"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2mnUVMmkth2x+N/ODszG\nOFIYBL6NOO1XWRj1wkmecKuLziJDhFz0WQmyOjY34Ymg9pLuBA9QSWrrZuvPw40N\nm0X/GBmttFmPNvca3WmJ2oKM7PpLiUU9f7Ov5WeIXnx++ts/LC/OB7FtZ+LiRgJ7\n0mZnPeTogdFrASf0zSQJv4jmX840LPa6nomWeUgIVGPLLVI14Gib8Dl+nOckqCNc\nkAUUk4IBF67DufRt9zQyRxg99ysakvHX2SDbdGvIBdxWxvhhmrBoeix0uSVtG2gm\njdvSqlPJVdvMbk1Xe2+SUldJPrxH1VrTYeRUt4yqWxy16nFJUDj9exZ202X4THkU\nJQIDAQAB\n-----END PUBLIC KEY-----"))).then(()=>{U=!0}).catch(()=>{U=!1,I.clear()}),U))(t))m=new l(e.productName,e.version,e.licensingDocsUrl);else if(E=u(t,e),E){if("trial"===E.type){const t=function(e){const t=r()-n(e);return Math.floor(t/86400)}(c(E.expiration));a(r(),E.expiration)?m=new d(e.productName,e.version,t):(m=new g(e.productName,t),N=!0)}else if("perpetual"===E.type||"subscription"===E.type){let t=E.expiration;"subscription"===E.type&&(t=i(t,10)),a(e.publishDate,t)?m=new f(e.productName,c(E.expiration),e.version,c(e.publishDate),e.licensingDocsUrl):N=!0}}else m=new p(e.productName,e.version,e.licensingDocsUrl);const A=E,T=A?.expiration?c(A.expiration):void 0;return{isLicenseValid:N,licenseType:E?.type,licenseProductCode:A?.code,expiration:T,message:m}}e.getLicenseStatus=E,e.setScriptKey=function(e){try{const t=JSON.parse(function(e){const t=[],n=e.trim();for(let e=0;e<n.length;e+=2){const i=n.slice(e,e+2);t.push(Number.parseInt(i,21))}let i=66;return t.map(e=>{const t=e^i;return i=e,t}).map(e=>String.fromCharCode(e)).join("")}(e));Array.isArray(t[3])&&t.splice(3,0,"");const n={products:t[1].map(([e,t,n])=>({code:e,licenseExpirationDate:t,trial:Boolean(n)})),userId:t[2],integrity:t[3],licenses:t[4],scriptKey:!0};try{const e=JSON.parse(y.data);n.products=[...e.products,...n.products],n.licenses=[...e.licenses,...n.licenses]}catch(e){}y.data=JSON.stringify(n)}catch(e){}},e.validatePackage=function(e){if(I.has(e.name))return I.get(e.name);const{isLicenseValid:t,message:n}=E(e),i=(e=>e.productCode||e.productCodes[0])(e);return n&&!m.has(i)&&(!function(e,t){if("object"==typeof console){const i=`[${e.severity}][Telerik and Kendo UI Licensing]`+(n?` ${n}:`:"")+` ${t.productName}`,r="function"==typeof console.group;r?console.group(i):console.warn(i),console.warn(e.message),r&&console.groupEnd()}var n}(n,e),m.add(i)),I.set(e.name,t),t}});
